{% extends "merchstore/layout.html" %}
{% block body %}
{% if messages %}
        <!-- to render messages like not enough stock -->
        <ul class="messages" style="list-style-type: none; padding-left: 0; color: red;">
            {% for message in messages %}
                <li>{{ message }}</li>
            {% endfor %}
        </ul>
        {% endif %}

        <div class="product-details">
            <ul class="product-details-list">
                {% for detail in product_qs %}
                    <li>
                        <div class="product-details-header">
                            <h2>{{ detail.name }}</h2>
                            <p>P{{ detail.price }}</p>
                        </div>
                        <p>product type: {{ detail.product_type.name }}</p>
                        <p>description: {{ detail.description }}</p>
                        <p>stock: {{ detail.stock }}</p>
                        <p>status: {{ detail.get_status_display }}</p>
                        <p>owner: {{ detail.owner }}</p>
                    </li>
                {% endfor %}
            </ul>
        </div>
        
        {% if product_obj.owner !=  profile  %}
            <form method="post">
                {% csrf_token %}
                <h2>Buy Product</h2>
                {{ buy_product_form.as_p }}
                <button type="submit" 
                        {% if product_obj.stock <= 0 %}disabled{% endif %}>
                    BUY
                </button>
            </form>
            {% else %}
                <a href="{% url 'update_product' product_obj.id %}">Update/Edit your product</a>
        {% endif %}
{% endblock %}